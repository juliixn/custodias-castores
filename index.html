
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplicación de Monitoreo y Custodia</title>
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
          integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" />
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="login-container">
        <h1>Bienvenido</h1>
        <p>Inicia sesión o regístrate para continuar</p>
        <form id="login-form">
            <input type="email" id="email" placeholder="Correo electrónico" required>
            <input type="password" id="password" placeholder="Contraseña" required>
            <button type="submit">Iniciar Sesión</button>
            <p class="auth-switch">¿No tienes cuenta? <a href="#" id="show-signup">Regístrate</a></p>
        </form>
        <form id="signup-form" class="hidden">
            <input type="email" id="signup-email" placeholder="Correo electrónico" required>
            <input type="password" id="signup-password" placeholder="Contraseña" required>
            <p>Selecciona tu rol:</p>
            <div class="role-radio">
                <input type="radio" id="role-custodio" name="role" value="custodio" checked>
                <label for="role-custodio">Custodio</label>
                <input type="radio" id="role-monitoreo" name="role" value="monitoreo">
                <label for="role-monitoreo">Monitoreo</label>
            </div>
            <button type="submit">Registrarse</button>
            <p class="auth-switch">¿Ya tienes cuenta? <a href="#" id="show-login">Inicia Sesión</a></p>
        </form>
    </div>

    <div id="custodio-view" class="hidden main-view">
        <header>
            <h1>Vista de Custodio</h1>
            <button id="logout-btn">Cerrar Sesión</button>
        </header>
        <main>
            <div id="map"></div>
            <!-- Panel de Acciones -->
            <div id="custodio-actions-panel">
                <!-- Acciones Rápidas de Reporte de Unidad -->
                <div id="quick-actions">
                    <p>Reportar Unidad:</p>
                    <div class="unit-buttons">
                        <button class="unit-btn" data-unit-type="torton"><img src="https://placehold.co/80x80/4dd0e1/1a1a1a?text=Torton" alt="Torton"></button>
                        <button class="unit-btn" data-unit-type="trailer"><img src="https://placehold.co/80x80/4dd0e1/1a1a1a?text=Trailer" alt="Trailer"></button>
                        <button class="unit-btn" data-unit-type="container"><img src="https://placehold.co/80x80/4dd0e1/1a1a1a?text=Contenedor" alt="Contenedor"></button>
                    </div>
                </div>
                <!-- Acciones de Seguimiento -->
                <div id="report-actions" class="hidden">
                    <p>Opciones de Reporte:</p>
                    <button class="action-btn" id="accompany-btn">Dar Acompañamiento</button>
                    <button class="action-btn" id="on-position-btn">Permanecer en Posición</button>
                    <button class="action-btn" id="wait-instructions-btn">Esperar Indicaciones</button>
                    <button class="action-btn" id="cancel-report-btn">Cancelar Reporte</button>
                </div>
                <!-- Botón de Emergencia -->
                <button id="sos-btn">SOS</button>
            </div>
        </main>
    </div>

    <div id="monitoreo-view" class="hidden main-view">
        <header>
            <h1>Vista de Monitoreo</h1>
            <button id="logout-btn-monitoreo">Cerrar Sesión</button>
        </header>
        <main>
            <div id="map-monitoreo"></div>
            <div id="reports-list">
                <h2>Reportes</h2>
                <!-- Los reportes se insertarán aquí -->
            </div>
        </main>
    </div>

    <!-- Modal del Teclado Numérico -->
    <div id="numpad-modal" class="hidden">
        <div class="numpad-container">
            <h2>Ingrese Número de Unidad</h2>
            <input type="text" id="numpad-display" readonly>
            <div class="numpad-grid">
                <button class="numpad-key">1</button>
                <button class="numpad-key">2</button>
                <button class="numpad-key">3</button>
                <button class="numpad-key">4</button>
                <button class="numpad-key">5</button>
                <button class="numpad-key">6</button>
                <button class="numpad-key">7</button>
                <button class="numpad-key">8</button>
                <button class="numpad-key">9</button>
                <button class="numpad-key" id="numpad-clear">C</button>
                <button class="numpad-key">0</button>
                <button class="numpad-key" id="numpad-backspace">⌫</button>
            </div>
            <div class="numpad-actions">
                <button id="numpad-cancel">Cancelar</button>
                <button id="numpad-confirm">Confirmar</button>
            </div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
            integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="></script>

    <!-- App Scripts -->
    <script src="firebase-config.js"></script>
    <script src="main.js"></script>
</body>
</html>
